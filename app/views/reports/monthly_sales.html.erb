 <div class="row" id="content_div">
  <div class="col-lg-12">
  <div class="panel">
    <div class="panel-body">
       <script src="http://code.highcharts.com/highcharts.js"></script>
        <script src="http://code.highcharts.com/modules/exporting.js"></script>
        <div id="monthly_sales_pie_chart" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
      
      <hr> 
    <div class="table-responsive">
    <%#= render :text => Buyer.first.to_json %>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th class="text-center">Sales By Month</th>
            <th class="text-center">Unit</th>
            <th class="text-center">GDV</th>
          </tr>
         </thead>
         <tbody>
          <% total = 0 %>
          <% @jan_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= jan = total %>
          <tr>
            <th class="text-center">JAN</th>
            <td class="text-center"><%= @jan_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @feb_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= feb = total %>
          <tr>
            <th class="text-center">FEB</th>
            <td class="text-center"><%= @feb_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @mar_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= mar = total %>
          <tr>
            <th class="text-center">MAR</th>
            <td class="text-center"><%= @mar_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @apr_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= apr = total %>
          <tr>
            <th class="text-center">APR</th>
            <td class="text-center"><%= @apr_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @may_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= may = total %>
          <tr>
            <th class="text-center">MAY</th>
            <td class="text-center"><%= @may_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

           <% total = 0 %>
          <% @jun_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= jun = total %>
          <tr>
            <th class="text-center">JUN</th>
            <td class="text-center"><%= @jun_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

           <% total = 0 %>
          <% @jul_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= jul = total %>
          <tr>
            <th class="text-center">JUL</th>
            <td class="text-center"><%= @jul_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

           <% total = 0 %>
          <% @ogo_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= aug = total %>
          <tr>
            <th class="text-center">AUG</th>
            <td class="text-center"><%= @ogo_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @sep_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= sep = total %>
          <tr>
            <th class="text-center">SEP</th>
            <td class="text-center"><%= @sep_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

           <% total = 0 %>
          <% @oct_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= oct = total %>
          <tr>
            <th class="text-center">OCT</th>
            <td class="text-center"><%= @oct_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @nov_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= nov = total %>
          <tr>
            <th class="text-center">NOV</th>
            <td class="text-center"><%= @nov_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>

          <% total = 0 %>
          <% @dec_sales.each do |sale| %>
          	<% total += sale.lot.selling_price %>
          <% end %>
          <%= dec = total %>
          <tr>
            <th class="text-center">DEC</th>
            <td class="text-center"><%= @dec_sales.size %></td>
            <td class="text-right">RM <%= number_with_delimiter(total) %></td>
          </tr>
          
        </tbody>
        
      </table>
    </div>
  </div>
</div>
</div>
</div>



<script type="text/javascript">
  $(function () {

            // var combine = <%#= raw sold.to_json %>
            var jan = <%= jan %>
            var feb = <%= feb %>
            var mar = <%= mar %>
            var apr = <%= apr %>
            var may = <%= may %>
            var jun = <%= jun %>
            var jul = <%= jul %>
            var aug = <%= aug %>
            var sep = <%= sep %>
            var oct = <%= oct %>
            var nov = <%= nov %>
            var dec = <%= dec %>
            // console.log(sold, reserved, available);


            var monthly_sale_cart = [["January", jan],["Febuary", feb],["March", mar],["April", apr],["May", may],["June", jun],["July", jul],["August", aug],["September", sep],["October", oct],["November", nov],["December", dec]];
            $('#monthly_sales_pie_chart').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: 1,//null,
                    plotShadow: false
                },
                title: {
                    text: 'Monthly Sales Report.'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.0f} %</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '<b>{point.name}</b>: {point.percentage:.0f} %',
                            style: {
                                color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                            }
                        }
                    }
                  },
                series: [{
                    type: 'pie',
                    name: 'Month Sales:',
                    data: monthly_sale_cart
                          // arrayMy
                        // ['Firefox',   40.0],
                        // ['IE',       20.0],
                        // // {
                        // //     name: 'Chrome',
                        // //     y: 12.8,
                        // //     sliced: true,
                        // //     selected: true
                        // // }, 
                }]
            });
          });

</script>     