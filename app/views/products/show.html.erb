<h3 class="panel-title"><strong>Product Detail</strong></h3>
  <div class="panel">
    <div class="panel-body">
      <p>
        <strong>Name:</strong>
        <%= @product.name %>
      </p>

      <p>
        <strong>Type:</strong>
        <%= @product.type %>
      </p>

      <p>
        <strong>Description:</strong>
        <%= @product.description %>
      </p>

      <p>
        <strong>Status:</strong>
        <%= @product.status %>
      </p>

    </div>
  </div>
  <%#= link_to "Lot List", lots_path(:product_id => @product.id), :class=>"btn btn-default" %>
  <button data-target="#generate_lot" data-toggle="modal" class="btn btn-primary">Generate Lot</button>
  <button data-target="#new_product_type" data-toggle="modal" class="btn btn-primary">New Product Type</button>
  <hr>

  <h3 class="panel-title"><strong>Product Types List</strong></h3>
  <div class="panel">
    <div class="panel-body">
      <%= form_tag update_product_type_product_types_path do %>
      <table class="table table-bordered">
        <tr>
          <th>Name</th>
          <th>Desription</th>
          <th class="text-center">Action</th>
        </tr>
        <% @product.product_types.each_with_index do |p, index| %>
        <tr>
          <td>
            <%= text_field_tag "product_type[#{p.id}][name]", p.name, :class=>"form-control" %>
          </td>
          <td>
            <%= text_field_tag "product_type[#{p.id}][description]", p.description, :class=>"form-control" %>
          </td>
          <td class="text-center">
            <%= link_to 'Destroy', product_type_path(p), method: :delete, data: { confirm: 'Are you sure?' }, :class=>"btn btn-small btn-danger" %>
          </td>
        </tr>
        <% end %>
      </table>
      <%= submit_tag "Update", :class=>"btn btn-primary pull-right" %>
      <% end %>
    </div>
  </div>

  <h3 class="panel-title"><strong>Lot List</strong></h3>
  <div class="panel">
    <div class="panel-body">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <% @product.lots.each do |lot| %>
            <tr>
              <td><%= lot.name %></td>
              <td><%= lot.product_type.try(:name) %></td>
              <td>
              <%= link_to 'Destroy', lot, method: :delete, data: { confirm: 'Are you sure?' }, :class=>"btn btn-danger btn-small" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>


  <div class="modal fade" id="generate_lot" role="dialog" tabindex="-1" aria-labelledby="generate_lot" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <!--Modal header-->
        <div class="modal-header">
          <button data-dismiss="modal" class="close" type="button">
          <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Generate Lot (<%= @product.title %>)</h4>
        </div>

        <!--Modal body-->
        <div class="modal-body">
          <%= render "/products/generate_lot", :product_id => @product.id  %>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="new_product_type" role="dialog" tabindex="-1" aria-labelledby="new_product_type" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <!--Modal header-->
        <div class="modal-header">
          <button data-dismiss="modal" class="close" type="button">
          <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Product Type</h4>
        </div>

        <!--Modal body-->
        <div class="modal-body">
          <%= render :partial => "/product_types/form", :locals => { :product => @product } %>
        </div>
      </div>
    </div>
  </div>